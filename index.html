<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prenotazione Ristorante ¬∑ WhatsApp</title>
  <meta name="description" content="Form moderno per prenotare e inviare i dettagli via WhatsApp (numero opzionale configurabile)" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Font elegante -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #fdf8f4;
      --card: #fff;
      --stroke: rgba(0,0,0,.1);
      --text: #3b2f2f;
      --muted: #6d5c5c;
      --accent: #E74C3C;
      --accent-2: #27ae60;
      --danger: #c0392b;
      --radius: 18px;
      --blur: 12px;
      --field-h: 48px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans";
      color:var(--text);
      background: linear-gradient(180deg, #fffdfb, var(--bg));
      overflow-x:hidden;
    }
    .wrap{min-height:100%; display:grid; place-items:center; padding: clamp(16px, 4vw, 48px)}
    .card{ width:min(780px, 92vw); background:var(--card); border:1px solid var(--stroke); border-radius:var(--radius); box-shadow: 0 12px 30px rgba(0,0,0,.08); overflow:hidden; position:relative }
    .header{display:flex; align-items:center; gap:12px; padding:22px 22px 10px 22px}
    .logo{width:38px; height:38px; border-radius:12px; display:grid; place-items:center; background:linear-gradient(135deg,var(--accent),var(--accent-2)); box-shadow:0 4px 10px rgba(231,76,60,.25)}
    .title{font-weight:600; letter-spacing:.2px; font-size:1.2rem}
    .subtitle{color:var(--muted); font-size:.94rem; margin-top:2px}

    form{padding: 18px 22px 22px 22px; display:grid; grid-template-columns: 1fr 1fr; gap:18px}
    @media (max-width:720px){ form{grid-template-columns: 1fr} }

    .label-top{ display:block; margin: 0 0 6px 2px; font-size:.9rem; color:var(--muted); font-weight:500 }
    .input, select, textarea{ width:100%; height: var(--field-h); background:#fff; color:var(--text); border:1px solid var(--stroke); border-radius:14px; padding: 12px 14px; outline:none; transition: border .2s ease, box-shadow .2s ease, transform .08s ease; font-family:'Poppins', sans-serif; font-size:.95rem }
    textarea.input{ height:auto; min-height: calc(var(--field-h) + 20px); resize:vertical }
    .input:focus, select:focus, textarea:focus{ border-color: var(--accent); box-shadow:0 0 0 4px rgba(231,76,60,.15) }
    .input:hover, select:hover, textarea:hover{ border-color: rgba(0,0,0,.2) }

    .row-2{grid-column: 1 / -1}

    /* === STEPPER PERSONE (fix dimensioni & allineamento) === */
    .label-static{ display:block; margin:0 0 6px 2px; font-size:.9rem; color:var(--muted); font-weight:500 }
    .stepper{ display:grid; grid-template-columns: var(--field-h) 1fr var(--field-h); align-items:stretch; width:100%; max-width: 220px; height: var(--field-h); border:1px solid var(--stroke); border-radius:14px; background:#fff; overflow:hidden }
    .stepper button{ all:unset; display:grid; place-items:center; cursor:pointer; user-select:none; line-height:1; border:0 }
    .stepper button:first-child{ border-right:1px solid var(--stroke) }
    .stepper button:last-child{ border-left:1px solid var(--stroke) }
    .stepper button:active{ transform: translateY(0.5px) }
    .stepper input{ width:100%; text-align:center; border:0; background:transparent; color:var(--text); font-family:'Poppins', sans-serif; font-size:1rem }

    .controls{display:flex; gap:10px; align-items:center}

    .preview{background:#fff; border:1px dashed rgba(0,0,0,.15); border-radius:14px; padding:12px 14px; font-size:.92rem; color:var(--text); font-family:'Poppins', sans-serif}

    .actions{grid-column: 1 / -1; display:flex; justify-content:space-between; gap:12px; align-items:center}
    .btn{--h: 52px; height: var(--h); display:inline-grid; place-items:center; padding:0 18px; border-radius:14px; border:1px solid rgba(0,0,0,.1); background: linear-gradient(180deg, var(--accent), #c63b2f); color:white; cursor:pointer; position:relative; overflow:hidden; transition: transform .08s ease, filter .2s ease, border-color .2s ease; font-family:'Poppins', sans-serif; font-weight:500 }
    .btn:hover{ filter: brightness(1.05); border-color: rgba(0,0,0,.2) }
    .btn:active{ transform: translateY(1px) }

    .checkbox{ display:flex; gap:10px; align-items:flex-start; color:var(--muted); font-size:.9rem; font-family:'Poppins', sans-serif }
    .error{ color:var(--danger); font-size:.9rem; font-family:'Poppins', sans-serif }
    .footer{ padding: 12px 22px 20px 22px; font-size:.85rem; color:var(--muted); border-top:1px solid var(--stroke); background:#fff; font-family:'Poppins', sans-serif }
  </style>
</head>
<body>
  <main class="wrap">
    <section class="card" role="form" aria-labelledby="formTitle">
      <div class="header">
        <div class="logo" aria-hidden="true">üçï</div>
        <div>
          <div class="title" id="formTitle">Prenota il tuo tavolo</div>
          <div class="subtitle">A cena fuori, con un click.</div>
        </div>
      </div>
      <form id="bookingForm" novalidate>
        <div class="field">
          <label class="label-top" for="nome">Nome *</label>
          <input class="input" id="nome" name="nome" type="text" autocomplete="name" required aria-required="true" />
        </div>
        <div class="field">
          <label class="label-top" for="telefono">Telefono *</label>
          <input class="input" id="telefono" name="telefono" type="tel" autocomplete="tel" inputmode="tel" pattern="[+0-9 ]{6,}" required aria-required="true" />
        </div>
        <div class="field">
          <label class="label-top" for="data">Data *</label>
          <input class="input" id="data" name="data" type="date" required aria-required="true" />
        </div>
        <div class="field">
          <label class="label-top" for="ora">Ora *</label>
          <input class="input" id="ora" name="ora" type="time" required aria-required="true" />
        </div>
        <div class="field">
          <label class="label-static" for="persone">Persone</label>
          <div class="controls">
            <div class="stepper" aria-label="Numero di persone">
              <button type="button" id="minus" aria-label="Diminuisci">‚àí</button>
              <input id="persone" name="persone" type="number" min="1" max="20" value="2" />
              <button type="button" id="plus" aria-label="Aumenta">Ôºã</button>
            </div>
          </div>
        </div>
        <div class="field">
          <label class="label-top" for="preferenza">Preferenza tavolo</label>
          <select id="preferenza" class="input" name="preferenza">
            <option value="" hidden>Seleziona‚Ä¶</option>
            <option>Interno</option>
            <option>Esterno</option>
            <option>Qualsiasi</option>
          </select>
        </div>
        <div class="field row-2">
          <label class="label-top" for="note">Note (allergie, richieste...)</label>
          <textarea class="input" id="note" name="note" rows="3" maxlength="240"></textarea>
        </div>
        <div class="row-2">
          <div class="pill">Anteprima messaggio</div>
        </div>
        <div class="preview row-2" id="preview"></div>
        <div class="actions">
          <div class="left-actions">
            <label class="checkbox"><input type="checkbox" id="privacy" required aria-required="true"/> Accetto l'informativa privacy *</label>
            <div class="error" id="error"></div>
          </div>
          <button class="btn btn-primary" id="sendBtn" type="submit">Invia su WhatsApp</button>
        </div>
      </form>
    </section>
  </main>
<script>
  // =============== CONFIG ===============
  // Se vuoi inviare SEMPRE a un numero specifico, inseriscilo qui in formato E.164 (es. Italia: 39 + numero, niente spazi).
  // Lascia vuoto per far scegliere il contatto all'utente.
  const WHATSAPP_NUMBER = "393206007603"; // esempio: "393331234567"
  // ======================================

  const el = (id)=>document.getElementById(id);
  const fields = ['nome','telefono','data','ora','persone','preferenza','note'];
  const fmtDate = (value) => {if(!value) return ""; const d = new Date(value+'T00:00:00'); return new Intl.DateTimeFormat('it-IT',{weekday:'long',day:'2-digit',month:'long',year:'numeric'}).format(d);};
  const preview = () => {
    const v = Object.fromEntries(fields.map(f=>[f, el(f)?.value?.trim()]));
    const lines = [
      `Ciao! Vorrei prenotare un tavolo.`,
      v.nome? `‚Ä¢ Nome: ${v.nome}`: null,
      v.telefono? `‚Ä¢ Telefono: ${v.telefono}`: null,
      (v.data||v.ora)? `‚Ä¢ Quando: ${fmtDate(v.data)}${v.ora? ` alle ${v.ora}`: ''}`: null,
      v.persone? `‚Ä¢ Persone: ${v.persone}`: null,
      v.preferenza? `‚Ä¢ Tavolo: ${v.preferenza}`: null,
      v.note? `‚Ä¢ Note: ${v.note}`: null,
    ].filter(Boolean).join('\n');
    el('preview').textContent = lines;
    return lines;
  };
  preview();
  fields.forEach(id=> el(id)?.addEventListener('input', preview));
  el('minus').addEventListener('click', ()=>{const n=el('persone'); n.value=Math.max(parseInt(n.value||'1')-1, parseInt(n.min)); preview();});
  el('plus').addEventListener('click', ()=>{const n=el('persone'); n.value=Math.min(parseInt(n.value||'1')+1, parseInt(n.max)); preview();});
  el('bookingForm').addEventListener('submit',(e)=>{
    e.preventDefault();
    el('error').textContent='';
    const requiredOk=['nome','telefono','data','ora'].every(id=> el(id).value.trim());
    if(!requiredOk||!el('privacy').checked){el('error').textContent='Compila i campi obbligatori e accetta la privacy.';return;}
    const msg=preview();

    // Se √® configurato un numero, usa wa.me/NUMERO per aprire chat diretta
    const url = WHATSAPP_NUMBER
      ? `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`
      : `https://api.whatsapp.com/send?text=${encodeURIComponent(msg)}`;

    window.open(url,'_blank','noopener');
  });
  el('data').setAttribute('min', new Date().toISOString().slice(0,10));
</script>
</body>
</html>
